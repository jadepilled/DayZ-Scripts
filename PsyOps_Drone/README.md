# PsyOps_Drone Mod Update Notes

## Approach
- **Renamed the mod** to `PsyOps_Drone` by moving the folder and updating `CfgPatches`, `CfgMods`, and all file paths used in config/script/gui/anm references.
- **Expanded the kit data model** to include `category` and structured items with `class_name` and `quantity`, then wired that through RPCs, server-side delivery, and the UI.
- **Implemented the UI improvements** by adding a search field, category selector, and a scrollable kit-contents list that shows item previews with quantities.
- **Adjusted the tablet action condition** to rely on the energy manager’s switched-on state rather than `IsWorking`, matching vanilla GPS behavior and avoiding the prompt disappearing when the item isn’t actively ticking.

## Why This Approach
- **Category + search** are handled entirely client-side to keep RPC/data transfer minimal and consistent with vanilla UI patterns.
- **Item previews** use the same preview-spawn pattern from vanilla dev tools for safe local-only item rendering without physics.
- **Energy manager check** mirrors how vanilla devices determine “on” state for interaction prompts, which should eliminate the inconsistent prompt issue.

## Challenges
- **Data migration**: the old `kits.json` structure used a simple string list. The new structured format is required to display quantities and icons. The server now generates/loads the new format consistently to avoid mismatches.
- **UI layout**: the existing layout had limited space. The description area was reduced to make room for the item list while keeping the existing background assets.

## Uncertainties / Follow-up Checks
- **Custom kit files**: existing server `kits.json` files using the old format will need to be updated to the new schema or regenerated by deleting the old file. If you need automatic migration, that can be added.
- **Preview edge cases**: items with unusual models or dependencies could fail to preview; the UI will fall back to class names in those cases.
